!function(){function e(e,t){var n=new XMLHttpRequest;n.open("post","/send?"+(new Date).getTime()),n.addEventListener("readystatechange",function(){4==n.readyState&&t(n.responseText)}),n.send(e)}function t(e){var t=new FileReader;t.addEventListener("load",function(t){var r=Mustache.render(c,{image:t.target.rasult,name:e.name}),a=document.createElement("div");a.classList.add("photo"),a.innerHTML=r,l.appendChild(a),a.querySelector(".delete-photo").addEventListener("click",function(e){e.preventDefault(),n(a)}),d.push({file:e,div:a})}),t.readAsDataURL(e)}function n(e){d=d.filter(function(t){return t.div!=e}),e.parentNode.removeChild(e)}for(var r=document.querySelectorAll(".plus"),a=document.querySelectorAll(".minus"),o=document.querySelectorAll(".counter-input"),i=0;i<r.length;i++)r[i].addEventListener("click",function(e){e.preventDefault();var t=this.parentNode.querySelector(".counter-input"),n=parseInt(t.value)+1;n>10&&(n=10),t.value=n});for(var i=0;i<a.length;i++)a[i].addEventListener("click",function(e){e.preventDefault();var t=this.parentNode.querySelector(".children-count"),n=this.parentNode.querySelector(".people-count");console.log(n);var r=parseInt(t.value)-1,a=parseInt(n.value)-1;t.value=r,n.value=a});for(var i=0;i<r.length;i++)o[i].addEventListener("input",function(e){e.preventDefault(),isNaN(this.value)&&(this.value=0)});if("FormData"in window&&"FileReader"in window){var u=document.querySelector(".response"),l=document.querySelector(".photo-area"),c=document.querySelector("#image-template").innerHTML,d=[];u.addEventListener("submit",function(t){t.preventDefault();var n=new FormData(u);d.forEach(function(e){n.append("images",e.file)}),e(n,function(e){console.log(e)})}),"FormData"in window||u.querySelector(".pictures").addEventListener("change",function(){for(var e=this.files,n=0;n<e.length;n++)t(e[n]);this.value=""})}}();